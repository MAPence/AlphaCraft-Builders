@model ACB.Models.ContractorVM

@{
    ViewData["Title"] = "displayquote";

    var services = Model.Services;
    var images = Model.Quote.Images;
}

<div class="row d-flex justify-content-center">
    <div class="col-sm-10 alpha-form center mt-4">
        <h2>Quote @Model.Quote.Id</h2>
        <div class="row">
            <div id="info-tab" class="col-5 tab-btn mx-3" onclick="return Info()">Info</div>
            <div id="photo-tab" class="col-5 tab-btn" onclick="return Photos()">Photos</div>

        </div>
        
            <form class="align-items-center justify-content-center quote-box">

                <div id="info-view" >

                    <div class="row ">
                        <div class="form-group col-6">
                            @Model.Quote.Id
                        </div>

                        <div class="form-group col-6">
                            @Model.Quote.Firstname
                        </div>

                        <div class="form-group col-6">
                            @Model.Quote.Lastname
                        </div>
                    </div>

                </div>
                

                <div id="photo-view">

                <button class="btn arrow-btn left-arrow" onclick="return scrollright()">
                    <p>&#x2190;</p>
                </button>

                    @foreach (var image in @images)
                    {
                        
                           <img class="q-img" src="data:image;base64,@System.Convert.ToBase64String(image)" onclick="enlarge(this);" />
                        
                    }
                    

                    <button class="btn arrow-btn right-arrow" onclick="return scrollleft()">
                        <p>&#x2192;</p>
                    </button>

                </div>

                             
            </form>
    </div>
    <script>
        
        const imgs = document.querySelectorAll(".q-img");
        const arrowBtns = document.querySelectorAll(".arrow-btn");

        let activeImg = 0;
        

        console.log(arrowBtns);
        console.log(imgs);

        function activeImages() {
            imgs.forEach((img) => {
                img.classList.add("in-vis");
            });

            imgs[activeImg].classList.remove("in-vis");
        }

        activeImages();

        function scrollright(){
            
            activeImg++;
            if (activeImg > imgs.length - 1) {
                activeImg = 0;
            }

            activeImages();
            
            return false;
            
        }

        function scrollleft(){
            
            activeImg--;
            if (activeImg < 0) {
                activeImg = imgs.length - 1;
            }

            activeImages();
            
            return false;

        }

        function Info() {
            var infotab = document.getElementById("info-tab");
            infotab.style.borderBottomColor = "#04364A";

            var phototab = document.getElementById("photo-tab");
            phototab.style.borderBottomColor = "white";

            var photos = document.getElementById("photo-view");
            var info = document.getElementById("info-view");

            photos.style.display = "none";
            info.style.height = "70vh";

            return false;
        }

        function Photos() {
            var phototab = document.getElementById("photo-tab");
            phototab.style.borderBottomColor = "#04364A";

            var infotab = document.getElementById("info-tab");
            infotab.style.borderBottomColor = "white";

            var photos = document.getElementById("photo-view");
            var info = document.getElementById("info-view");

            photos.style.display = "block";
            info.style.height = "0px";

            return false;
        }


        

    </script>
</div>


       